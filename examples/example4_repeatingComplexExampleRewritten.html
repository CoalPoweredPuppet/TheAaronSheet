<div class="missing-css" style="font-weight: bold;color: red;">
    <h2>You are missing the CSS: </h2>
    <a style="font-size: .5em; color: blue; text-decoration: underline;" href="https://github.com/shdwjk/TheAaronSheet/blob/master/examples/examples.css">https://github.com/shdwjk/TheAaronSheet/blob/master/examples/examples.css</a>
</div>


<h3>Inventory</h3>

<div class="inventory-row headers">	
    <div class="name" >Item</div>
    <div class="quantity" >Qty</div>
    <div class="weight" >Weight</div>
    <div class="totalweight" >Total Weight</div>
    <div class="cost" >Cost($)</div>
    <div class="runningtotal" >Running Total($)</div>
</div>
<fieldset class="repeating_inventory">
	<div class="inventory-row">	
		<input class="name" type="text" name="attr_item" placeholder="item name" title="name" />
		<input class="quantity" type="text" name="attr_quantity" value="0" title="quantity" />
		<input class="weight" type="text" name="attr_weight" value="0" title="weight" />
		<input class="totalweight" type="text" name="attr_totalweight" value="0" title="totalweight" />
		<input class="cost" type="text" name="attr_cost" value="0" title="cost" />
		<input class="runningtotal" type="text" name="attr_runningtotal" value="0" title="running total" />
	</div>
</fieldset>

<div class="footer">
	<div class="total">Total Weight<br><input class="sumtotalweight" type="text" name="attr_total_weight" value="0" title="total weight" /></div>
	<div class="total">Total Cost<br><input class="sumtotalcost" type="text" name="attr_total_cost" value="0" title="total cost" /></div>
	<div class="total">Summary:<br><textarea class="summary" type="textarea" name="attr_summary" title="summary"/></textarea>
</div>



<div>TheAaronSheet :: <a href="https://github.com/shdwjk/TheAaronSheet">https://github.com/shdwjk/TheAaronSheet</a></div>



<script type="text/worker">

/*=include ../../../TheAaronSheet.js */


on('change:repeating_inventory', function(){

    TAS.repeating('inventory')
        .attrs('total_weight','total_cost','summary')  
        .fields('item','quantity','weight','totalweight','cost','runningtotal') 
        .reduce(function(m,r){
            m.weight+=(r.F.weight*r.I.quantity);
            r.D[3].totalweight=(r.F.weight*r.I.quantity);
            m.cost+=(r.F.cost*r.I.quantity);
            r.D[2].runningtotal=m.cost;
            m.desc.push(r.item+(r.I.quantity>1 ? ' (x'+r.S.quantity+')' : ''));
            return m;
            
        },{weight:0,cost:0, desc: []},function(m,r,a){
            a.summary=m.desc.join(', ');
            a.D[3].total_weight=m.weight;
            a.D[2].total_cost=m.cost;
        })
        .execute(); 

});



</script>
